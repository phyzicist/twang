#!/bin/bash
# Attempts to start the software synthesizer
# Has very little error handling!! This is currently a fragile script
# Written by Scott Feister, January 9, 2020
# Tested on the Raspberry Pi Zero W with the Pi Stereo Bonnet from Adafruit

echo "Attempting to start Jack Daemon"
jackd -r -d alsa &
sleep  3

echo "Attempting to start fluidsynth"
fluidsynth -jsi -g 5 -a jack -m alsa_seq --portname="fluidsynth" -r 48000 /usr/share/sounds/sf2/Guitars-Universal-V1.5.sf2 &
sleep 12 #TODO: Replace with a wait for fluidsynth to finish loading

echo "Attempting to connect Midi ports (Midi Through to Fluidsynth)"
aconnect 'Midi Through':0 'fluidsynth':0
